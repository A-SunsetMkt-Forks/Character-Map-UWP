<views:ViewBase
    x:Class="CharacterMap.Views.PrintView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:core="using:CharacterMap.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="using:CharacterMap.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:views="using:CharacterMap.Views"
    xmlns:win1903="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract, 8)"
    d:DesignHeight="720"
    d:DesignWidth="1280"
    Background="Transparent"
    mc:Ignorable="d">

    <UserControl.Resources>
        <Style x:Key="SubheaderTextBlockStyle" BasedOn="{StaticResource SubheaderTextBlockStyle}" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="Margin" Value="0 12 0 4" />
        </Style>
        <Style x:Key="DescriptionStyle" BasedOn="{StaticResource BaseTextBlockStyle}" TargetType="TextBlock">
            <Setter Property="Opacity" Value="0.7" />
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="Margin" Value="0 0 0 8" />
            <Setter Property="OpticalMarginAlignment" Value="TrimSideBearings" />
        </Style>
        <Style x:Key="HeaderStyle" TargetType="TextBlock">
            <Setter Property="OpticalMarginAlignment" Value="TrimSideBearings" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Margin" Value="0 20 0 4" />
        </Style>
        <Style x:Key="HintStyle" BasedOn="{StaticResource DescriptionStyle}" TargetType="TextBlock">
            <Setter Property="Margin" Value="4 4 0 12" />
            <Setter Property="FontStyle" Value="Italic" />
            <Setter Property="OpticalMarginAlignment" Value="None" />
        </Style>
        <Style TargetType="RadioButton">
            <Setter Property="MinWidth" Value="200" />
        </Style>

        <Style x:Key="SpacerStyle" TargetType="Border">
            <Setter Property="Height" Value="1" />
            <Setter Property="Background" Value="{ThemeResource AppBarItemForegroundThemeBrush}" />
            <Setter Property="Opacity" Value="0.3" />
            <Setter Property="Margin" Value="0 24 0 12" />
        </Style>

        <Style BasedOn="{StaticResource DefaultComboBoxStyle}" TargetType="ComboBox">
            <Setter Property="MinWidth" Value="180" />
        </Style>

        <Style x:Name="NumberBoxSpinButtonStyle" BasedOn="{StaticResource DefaultRepeatButtonStyle}" TargetType="RepeatButton">
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="MinWidth" Value="34" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
            <Setter Property="Background" Value="{ThemeResource TextControlBackground}" />
            <Setter Property="BorderBrush" Value="{ThemeResource TextControlBorderBrush}" />
            <Setter Property="BorderThickness" Value="{ThemeResource NumberBoxSpinButtonBorderThickness}" />
            <Setter Property="FontFamily" Value="{ThemeResource SymbolThemeFontFamily}" />
        </Style>

        <ControlTemplate x:Key="HorizontalNumberBoxTemplate" TargetType="muxc:NumberBox">
            <Grid>
                <Grid.Resources>
                    <ResourceDictionary>
                        <ResourceDictionary.ThemeDictionaries>
                            <ResourceDictionary x:Key="Light">
                                <StaticResource x:Key="RepeatButtonBorderBrushPointerOver" ResourceKey="TextControlBorderBrush" />
                                <StaticResource x:Key="RepeatButtonBorderBrushPressed" ResourceKey="TextControlBorderBrush" />
                            </ResourceDictionary>
                            <ResourceDictionary x:Key="Dark">
                                <StaticResource x:Key="RepeatButtonBorderBrushPointerOver" ResourceKey="TextControlBorderBrush" />
                                <StaticResource x:Key="RepeatButtonBorderBrushPressed" ResourceKey="TextControlBorderBrush" />
                            </ResourceDictionary>
                            <ResourceDictionary x:Key="HighContrast">
                                <StaticResource x:Key="RepeatButtonBorderBrushPointerOver" ResourceKey="SystemControlHighlightBaseMediumLowBrush" />
                                <StaticResource x:Key="RepeatButtonBorderBrushPressed" ResourceKey="SystemControlHighlightTransparentBrush" />
                            </ResourceDictionary>
                        </ResourceDictionary.ThemeDictionaries>
                    </ResourceDictionary>
                </Grid.Resources>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="SpinButtonStates">
                        <VisualState x:Name="SpinButtonsCollapsed" />
                        <VisualState x:Name="SpinButtonsVisible">
                            <VisualState.Setters>
                                <Setter Target="InputBox.CornerRadius" Value="{Binding Source={ThemeResource ControlCornerRadius}, Converter={StaticResource LeftCornerRadiusFilterConverter}}" />
                            </VisualState.Setters>
                        </VisualState>
                        <VisualState x:Name="SpinButtonsPopup" />
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="UpSpinButtonEnabledStates">
                        <VisualState x:Name="UpSpinButtonEnabled" />
                        <VisualState x:Name="UpSpinButtonDisabled">
                            <VisualState.Setters>
                                <Setter Target="UpSpinButton.IsEnabled" Value="False" />
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="DownSpinButtonEnabledStates">
                        <VisualState x:Name="DownSpinButtonEnabled" />
                        <VisualState x:Name="DownSpinButtonDisabled">
                            <VisualState.Setters>
                                <Setter Target="DownSpinButton.IsEnabled" Value="False" />
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <ContentPresenter
                    x:Name="HeaderContentPresenter"
                    Grid.ColumnSpan="3"
                    Margin="{ThemeResource TextBoxTopHeaderMargin}"
                    VerticalAlignment="Top"
                    Content="{TemplateBinding Header}"
                    ContentTemplate="{TemplateBinding HeaderTemplate}"
                    FontWeight="Normal"
                    Foreground="{ThemeResource TextControlHeaderForeground}"
                    TextWrapping="Wrap" />
                <TextBox
                    x:Name="InputBox"
                    Grid.Row="1"
                    MinWidth="50"
                    PlaceholderText="{TemplateBinding PlaceholderText}"
                    PreventKeyboardDisplayOnProgrammaticFocus="{TemplateBinding PreventKeyboardDisplayOnProgrammaticFocus}"
                    SelectionHighlightColor="{TemplateBinding SelectionHighlightColor}"
                    TextReadingOrder="{TemplateBinding TextReadingOrder}" />
                <RepeatButton
                    x:Name="DownSpinButton"
                    Grid.Row="1"
                    Grid.Column="1"
                    Content="&#xE00E;"
                    CornerRadius="0"
                    FontSize="{TemplateBinding FontSize}"
                    Style="{StaticResource NumberBoxSpinButtonStyle}" />
                <RepeatButton
                    x:Name="UpSpinButton"
                    Grid.Row="1"
                    Grid.Column="2"
                    Content="&#xE00F;"
                    CornerRadius="{Binding Source={ThemeResource ControlCornerRadius}, Converter={StaticResource RightCornerRadiusFilterConverter}}"
                    FontSize="{TemplateBinding FontSize}"
                    Style="{StaticResource NumberBoxSpinButtonStyle}" />
            </Grid>
        </ControlTemplate>


    </UserControl.Resources>

    <Grid x:Name="LayoutRoot">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="AUto" />
        </Grid.RowDefinitions>

        <Grid
            x:Name="HeaderGrid"
            Height="45"
            Background="{ThemeResource SystemControlBackgroundAccentBrush}"
            RequestedTheme="{x:Bind core:Converters.ChooseThemeForAccent(Settings), Mode=OneWay}">
            <TextBlock
                x:Uid="PrintHeader"
                Margin="20 0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                FontSize="22"
                FontWeight="SemiLight"
                Foreground="{x:Bind core:Converters.GetForegroundBrush(Settings), Mode=OneWay}"
                Text="Print Setup" />

            <AppBarButton
                x:Name="BtnClose"
                x:Uid="BtnClose"
                Width="45"
                Height="45"
                HorizontalAlignment="Right"
                Click="{x:Bind Hide}"
                Foreground="{x:Bind core:Converters.GetForegroundBrush(Settings), Mode=OneWay}">
                <SymbolIcon Symbol="Cancel" />
            </AppBarButton>

        </Grid>

        <Grid
            x:Name="ContentPanel"
            Grid.Row="1"
            ColumnSpacing="24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.8*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Requires it's own element to enable theme shadows  -->
            <Border x:Name="ContentBackground" Grid.ColumnSpan="2">
                <Border.Background>
                    <AcrylicBrush
                        win1903:TintLuminosityOpacity="0.3"
                        BackgroundSource="Backdrop"
                        FallbackColor="{ThemeResource SystemAltHighColor}"
                        TintColor="{ThemeResource SystemChromeGrayColor}"
                        TintOpacity="0.6" />
                </Border.Background>
            </Border>

            <ScrollViewer x:Name="ContentScroller">
                <StackPanel Margin="20 20 20 120">
                    <TextBlock
                        x:Uid="PrintDesign"
                        Style="{StaticResource SubheaderTextBlockStyle}"
                        Text="Design" />


                    <TextBlock Style="{StaticResource HeaderStyle}" Text="Character Size" />
                    <Slider
                        HorizontalAlignment="Stretch"
                        IsThumbToolTipEnabled="True"
                        Maximum="192"
                        Minimum="64"
                        StepFrequency="2"
                        TickFrequency="4"
                        TickPlacement="Outside"
                        Value="{x:Bind ViewModel.GlyphSize, Mode=TwoWay}" />
                    <TextBlock>
                        <Run Text="{x:Bind ViewModel.GlyphSize, Mode=OneWay}" />
                        <Run Text="px" />
                    </TextBlock>

                    <TextBlock Style="{StaticResource HeaderStyle}" Text="List Style" />
                    <ComboBox
                        ItemsSource="{x:Bind Layouts}"
                        SelectedIndex="0"
                        SelectedItem="{x:Bind ViewModel.Layout, Mode=TwoWay}" />

                    <TextBlock Style="{StaticResource HeaderStyle}" Text="Character Description" />
                    <ComboBox SelectedIndex="1">
                        <ComboBoxItem>None</ComboBoxItem>
                        <ComboBoxItem>Unicode Hex</ComboBoxItem>
                        <ComboBoxItem>Character Index</ComboBoxItem>
                        <ComboBoxItem>Unicode description</ComboBoxItem>
                    </ComboBox>

                    <Border Style="{StaticResource SpacerStyle}" />

                    <TextBlock
                        x:Uid="PrintLayout"
                        Style="{StaticResource SubheaderTextBlockStyle}"
                        Text="Page Layout" />

                    <TextBlock Style="{StaticResource HeaderStyle}" Text="Page Orientation" />
                    <ComboBox SelectedIndex="0" SelectionChanged="RadioButtons_SelectionChanged">
                        <ComboBoxItem>Portrait</ComboBoxItem>
                        <ComboBoxItem>Landscape</ComboBoxItem>
                    </ComboBox>

                    <ToggleSwitch
                        Margin="0 12 0 -4"
                        Header="Show Margins (Preview Only)"
                        IsOn="{x:Bind ViewModel.ShowMargins, Mode=TwoWay}" />


                    <TextBlock Style="{StaticResource HeaderStyle}" Text="Horizontal Margin" />
                    <Slider
                        HorizontalAlignment="Stretch"
                        IsThumbToolTipEnabled="True"
                        Maximum="84"
                        Minimum="44"
                        StepFrequency="2"
                        TickFrequency="4"
                        TickPlacement="Outside"
                        Value="{x:Bind ViewModel.HorizontalMargin, Mode=TwoWay}" />
                    <TextBlock>
                        <Run Text="{x:Bind ViewModel.HorizontalMargin, Mode=OneWay}" />
                        <Run Text="px" />
                    </TextBlock>

                    <TextBlock Style="{StaticResource HeaderStyle}" Text="Vertical Margin" />
                    <Slider
                        HorizontalAlignment="Stretch"
                        IsThumbToolTipEnabled="True"
                        Maximum="84"
                        Minimum="44"
                        StepFrequency="2"
                        TickFrequency="4"
                        TickPlacement="Outside"
                        Value="{x:Bind ViewModel.VerticalMargin, Mode=TwoWay}" />
                    <TextBlock>
                        <Run Text="{x:Bind ViewModel.VerticalMargin, Mode=OneWay}" />
                        <Run Text="px" />
                    </TextBlock>


                    <Border Style="{StaticResource SpacerStyle}" />

                    <TextBlock
                        x:Uid="PrintData"
                        Style="{StaticResource SubheaderTextBlockStyle}"
                        Text="Data" />

                    <TextBlock Style="{StaticResource HeaderStyle}" Text="Show" />
                    <TextBlock Style="{StaticResource DescriptionStyle}" Text="Choose the range of glyphs to print." />
                    <ComboBox
                        Width="200"
                        SelectedIndex="0"
                        Style="{StaticResource DefaultComboBoxStyle}">
                        <ComboBoxItem>All</ComboBoxItem>
                        <ComboBoxItem>Latin characters</ComboBoxItem>
                        <ComboBoxItem>Symbols</ComboBoxItem>
                        <ComboBoxItem>Control Characters</ComboBoxItem>
                    </ComboBox>
                </StackPanel>
            </ScrollViewer>

            <Grid
                Grid.Column="1"
                Margin="12"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Loaded="{x:Bind helpers:Composition.SetStandardReposition}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                    <TextBlock VerticalAlignment="Center">Page</TextBlock>
                    <muxc:NumberBox
                        Margin="8 0"
                        LargeChange="1"
                        Maximum="{x:Bind PageCount, Mode=OneWay}"
                        Minimum="1"
                        SmallChange="1"
                        SpinButtonPlacementMode="Inline"
                        Template="{StaticResource HorizontalNumberBoxTemplate}"
                        ValueChanged="NumberBox_ValueChanged"
                        Value="{x:Bind CurrentPage, Mode=TwoWay}" />
                    <TextBlock VerticalAlignment="Center"><Run Text="of " /><Run Text="{x:Bind PageCount, Mode=OneWay}" /></TextBlock>
                </StackPanel>

                <Viewbox
                    x:Name="PreviewViewBox"
                    Grid.Row="1"
                    Margin="12"
                    IsHitTestVisible="False"
                    Stretch="Uniform" />
            </Grid>


        </Grid>


        <Grid Grid.Row="2" Background="{ThemeResource SystemAccentColorDark2}">
            <StackPanel
                Margin="8"
                HorizontalAlignment="Right"
                Orientation="Horizontal"
                RequestedTheme="Dark"
                Spacing="8">
                <Button
                    x:Name="BtnContinue"
                    Width="150"
                    Click="BtnContinue_Click"
                    Style="{StaticResource AccentButtonStyle}">
                    Continue
                </Button>
                <Button
                    Width="150"
                    Click="{x:Bind Hide}"
                    Style="{StaticResource ButtonRevealStyle}">
                    Cancel
                </Button>
            </StackPanel>
        </Grid>

    </Grid>
</views:ViewBase>
